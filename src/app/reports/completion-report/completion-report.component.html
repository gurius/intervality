<h3 class="my-3 flex justify-center px-5">{{ name }}</h3>
@if (!saved) {
  <div class="report">
    <ol
      class="mb-4 flex h-[calc(100%-68px)] w-full flex-col gap-3 overflow-y-auto text-xl"
    >
      @for (item of report; track idx; let idx = $index) {
        <li
          class="relative flex h-fit min-h-6 flex-grow flex-row items-center justify-between gap-3 px-5"
        >
          <div
            class="overflow-hidden text-ellipsis whitespace-nowrap"
            [attr.title]="item.name"
          >
            {{ item.name }}
          </div>
          <div class="whitespace-nowrap">
            {{ item.totalTime | timeStr }} <span> / {{ item.reps }} </span>
          </div>
        </li>
      }
      <hr />
      <li
        class="relative flex h-fit min-h-6 flex-grow flex-row items-center justify-between gap-3 px-5"
      >
        <div class="overflow-hidden text-ellipsis whitespace-nowrap">total</div>
        <div class="whitespace-nowrap">
          {{ totalTime | timeStr }} <span> / {{ report.length }} </span>
        </div>
      </li>
    </ol>
    <div class="justify-centr mb-4 flex flex-col items-center text-xl">
      <div class="flex flex-grow items-center justify-center">
        <button
          type="button"
          class="mx-3 h-10 w-24 rounded-md bg-secondary text-on-secondary"
          (click)="discardReport()"
        >
          <span class="cursor-pointer">discard</span>
        </button>
        <button
          type="button"
          class="mx-3 h-10 w-24 rounded-md bg-secondary text-on-secondary"
          (click)="saveReport()"
        >
          <span class="cursor-pointer">save</span>
        </button>
      </div>
    </div>
  </div>
}
@if (reports.length) {
  <div
    class="mb-2 flex justify-between gap-7 bg-surface px-5 align-middle text-2xl text-primary shadow-md"
  >
    <span> history </span>
    <div class="flex items-center gap-3">
      <button type="button" class="h-10 w-10 rounded-md" (click)="goToChart()">
        <fa-icon [icon]="['far', 'chart-bar']"></fa-icon>
      </button>

      <button type="button" class="h-10 w-10 rounded-md" (click)="export()">
        <fa-icon [icon]="['fas', 'file-arrow-down']"></fa-icon>
      </button>

      <button
        type="button"
        class="flex h-10 w-10 items-center gap-1"
        (click)="removeAll()"
      >
        <fa-icon [icon]="['far', 'trash-can']"></fa-icon>
        all
      </button>
    </div>
  </div>
}

<ol class="reports flex w-full flex-col gap-3 overflow-y-auto text-xl">
  @for (item of reports; track idx; let idx = $index) {
    <li
      class="flex min-h-10 flex-grow flex-row items-center justify-between gap-3 rounded-2xl px-5 pb-2"
    >
      <div
        class="overflow-hidden text-ellipsis whitespace-nowrap"
        [attr.title]="item.startTime"
      >
        {{ item.startTime }}
      </div>
      <div class="flex items-center gap-3">
        <button
          type="button"
          class="h-10 w-10 rounded-md"
          (click)="remove(item)"
        >
          <fa-icon [icon]="['far', 'trash-can']"></fa-icon>
        </button>
      </div>
    </li>
  }
</ol>
